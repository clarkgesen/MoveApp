<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="http://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./assets/css/meal-style.css">
    <link rel="stylesheet" href="./assets/css/dashboard.css">


    <title>Move App</title>
</head>

<body>
    <header class="page-header">
        <nav>
            <a href="#0">
                <img class="logo" src="" alt="MOVE">
            </a>
            <button class="toggle-mob-menu" aria-expanded="false" aria-label="open menu">
                    <svg width="20" height="20" aria-hidden="true">
                      <use xlink:href="#down"></use>
                    </svg>
                  </button>
            <ul class="admin-menu" aria-disabled="true">
                <li class="menu-heading">
                    <h3>Admin</h3>
                </li>
                <li>

                    <a href="./index.html">
                        <svg>
                          <use xlink:href="#pages"></use>
                        </svg>
                        <span>Dashbboard</span>
                    </a>
                </li>
                <li>
                    <a href="./activity.html">
                        <svg>
                          <use xlink:href="./activity.html"></use>
                        </svg>
                        <span>Activity</span>
                    </a>
                </li>
                <li>
                    <a href="./meal.html">
                        <svg>
                            <use xlink:href="#trends"></use>
                          </svg>
                        <span>Meals</span>
                    </a>
                </li>
                <li>
                    <a href="./Weather.html">
                        <svg>
                          <use xlink:href="#collection"></use>
                        </svg>
                        <span>Weather</span>
                    </a>
                </li>
                <!-- <li>
                      <a href="#0">
                        <svg>
                          <use xlink:href="#comments"></use>
                        </svg>
                        <span>Comments</span>
                      </a>
                    </li>
                    <li>
                      <a href="#0">
                        <svg>
                          <use xlink:href="#appearance"></use>
                        </svg>
                        <span>Appearance</span>
                      </a>
                    </li>
                    <li class="menu-heading">
                      <h3>Settings</h3>
                    </li>
                    <li>
                      <a href="#0">
                        <svg>
                          <use xlink:href="#settings"></use>
                        </svg>
                        <span>Settings</span>
                      </a>
                    </li> -->
                <!-- <li>
                      <a href="#0">
                        <svg>
                          <use xlink:href="#options"></use>
                        </svg>
                        <span>Options</span>
                      </a>
                    </li> -->
                <!-- <li>
                      <a href="#0">
                        <svg>
                          <use xlink:href="#charts"></use>
                        </svg>
                        <span>Charts</span>
                      </a>
                    </li> -->
                <li>
                    <button class="collapse-btn" aria-expanded="true" aria-label="collapse menu">
                        <svg aria-hidden="true">
                          <use xlink:href="#collapse"></use>
                        </svg>
                        
                      </button>
                </li>
            </ul>
        </nav>
    </header>
    </nav>

    <div class="fluid-container section-intro">
        <div class="searchbtn-1">
            <button id="btn-1" class="btn btn-outline-success my-2 my-sm-0" type="submit"> LET'S EAT</button>
            </form>
        </div>
    </div>
    <a href="#0">
        <img class="logo" src="" alt="forecastr logo">
    </a>
    <button class="toggle-mob-menu" aria-expanded="false" aria-label="open menu">
          <svg width="20" height="20" aria-hidden="true">
            <use xlink:href="#down"></use>
          </svg>
        </button>
    <ul class="admin-menu" aria-disabled="true">
        <li class="menu-heading">
            <h3>Admin</h3>
        </li>
        <li>
            <a href="/">
                <svg>
                <use xlink:href="#pages"></use>
              </svg>
                <span>Dashbboard</span>
            </a>
        </li>
        <li>
            <a href="./activity.html">
                <svg>
                <use xlink:href="./activity.html"></use>
              </svg>
                <span>Activity</span>
            </a>
        </li>
        <li>
            <a href="">
                <svg>
                <use xlink:href="#trends"></use>
              </svg>
                <span>Meals</span>
            </a>
        </li>
        <li>
            <button class="collapse-btn" aria-expanded="true" aria-label="collapse menu">
              <svg aria-hidden="true">
                <use xlink:href="#collapse"></use>
              </svg>
              <span>Collapse</span>
            </button>
        </li>
    </ul>
    </nav> -->
    <!-- **Nav bar ends here** -->
    <div class="container d-none">
        <div class="row">
            <!-- **Search bar and table*** -->
            <div class="col-md-4">
                <nav class="navbar navbar-light bg-light">

                    <form class="form-inline">
                        <input id="myMeals-OC" class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                        <button id="sub-2" class="btn btn-outline-danger my-2 my-sm-0" type="submit">Search</button>
                    </form>
                </nav>

                <table class="table table-striped table-light ">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col"></th>
                            <th scope="col">FOOD</th>
                            <th scope="col">CALs</th>
                            <th scope="col">DELETE</th>
                            <th scope="col">ADD</th>
                        </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
            <!-- **end of div for search bar and table** -->
            <!-- <div class="col-md-2">
                    Variable width content
                </div> -->
            <!-- ***Arc-here** -->

            <div class="col col-md-6">

                <div id="cals" class="arc-overlay">

                </div>
                <div class="arc-wrapper">
                    <div class="arc2"></div>
                    <div class="arc1"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- **Arc-ends here** -->
    </div>

    <script>
        // ****this code starts our calories counter**
        let totalCal = 0;



        $("#cals").html(`<div><h1>Cals:<br>${totalCal}</h1></div>`);

        // **onclick button for the search box on home page**
        $("#btn-1").click(function() {
            event.preventDefault();

            $(this).hide();

            $(".container").addClass("d-block");

            $(".section-intro").css("box-shadow", "inset 0px 0px 900px 150px #4c3f37");


            // ***This code changes the background color onclick**
            // $(".section-intro").css("background", "rgba(0, 0, 0, .5)");


            // ***This code gets the value of the input box onclick***
            // let input = $("input").val().trim();
            // console.log(input);


        });



        $("#sub-2").click(function() {
            event.preventDefault();
            let myMeals = $("#myMeals-OC").val().trim();
            console.log(myMeals);

            const nutriQ = 'https://trackapi.nutritionix.com/v2/natural/nutrients';
            $.ajax({
                    url: "/api/mealsss",
                    method: "POST",

                    data: {
                        "query": `${myMeals}`
                            // "timezone": "US/Eastern"
                    }



                })
                .then(function(response) {
                    console.log("then working");

                    console.log(response);

                    response.foods.forEach(element => {
                        var image = element.photo.thumb;



                        var foodName = element.food_name;
                        console.log(foodName);

                        var calories = element.nf_calories;
                        // var newImg = $("<img>");
                        // newImg.attr("src", image);
                        // newImg.addClass("circle2");
                        $("tbody").append(`<tr>
                           
                            <td> <img src=${image}></img></td>
                            <td>${foodName}</td>
                            <td>${calories}</td>
                            <td>
                                <button type="button" class="del btn btn-danger"><i class="fa fa-trash"></i></button>
                                </td>
                            <td>
                                <button type="button" class="add btn btn-success"><i class="fa fa-thumbs-up"></i></button>
                                </td>
                            </tr>`);

                        $(document).on("click", ".add", function() {

                            console.log("adding");

                            newTotal = totalCal + calories;

                            $("#cals").append(newTotal);


                        })

                        $(document).on("click", ".del", function() {

                            console.log("deleting");
                            // $("tr").remove();

                            $('tr:last-child').remove();

                            table.row($("td").parents('tr'))
                                .remove()
                                .draw();


                            // newTotal = totalCal - calories;

                            // $("#cals").append(newTotal);
                        })

                    });

                }).fail(function(err) {
                    console.log("fail not working");


                    console.log(err);


                })

        });
    </script>

</body>


</html>